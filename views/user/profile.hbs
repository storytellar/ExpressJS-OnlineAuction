{{#section 'js'}}

<script>
  var inputs = document.forms['change-infor'].getElementsByTagName('input');
  var run_onchange = false;
  function valid() {
    var errors = false;
    var reg_mail = /^[a-z][a-z0-9_\.]{5,32}@[a-z0-9]{2,}(\.[a-z0-9]{2,4}){1,2}$/;
    for (var i = 0; i < inputs.length; i++) {
      var value = inputs[i].value;
      var id = inputs[i].getAttribute('name');

      // T·∫°o ph·∫ßn t·ª≠ span l∆∞u th√¥ng tin l·ªói
      var span = document.createElement('span');
      // N·∫øu span ƒë√£ t·ªìn t·∫°i th√¨ remove
      var p = inputs[i].parentNode;
      {
        // Ki·ªÉm tra c√°c tr∆∞·ªùng h·ª£p kh√°c
        if (id == 'email') {
          if (reg_mail.test(value) == false) { span.innerHTML = "<span style='color: red; font-size: 15px;'>Email kh√¥ng h·ª£p l·ªá (v√≠ d·ª•: abc@gmail.com)</span>"; }
          var email = value;
        }

      }

      // N·∫øu c√≥ l·ªói th√¨ ch√®n span v√†o h·ªì s∆°, ch·∫°y onchange, submit return false, highlight border
      if (span.innerHTML != '') {
        inputs[i].parentNode.appendChild(span);
        errors = true;
        run_onchange = true;
        //inputs[i].style.border = '1px solid #c6807b';
        //inputs[i].style.background = '#fffcf9';
      }
    }// end for


    return !errors;
  }// end valid()

  // Ch·∫°y h√†m ki·ªÉm tra valid()
  var register = document.getElementById('update_button');
  register.onclick = function () {
    return valid();
  }

  // Ki·ªÉm tra l·ªói v·ªõi s·ª± ki·ªán onchange -> g·ªçi l·∫°i h√†m valid()
  for (var i = 0; i < inputs.length; i++) {
    var id = inputs[i].getAttribute('id');
    inputs[i].onchange = function () {
      if (run_onchange == true) {
        this.style.border = '1px solid #999';
        this.style.background = '#fff';
        valid();
      }
    }
  }// end for
</script>
{{/section}}

{{#section 'css'}}

<title>Profile</title>

<link rel="stylesheet" type="text/css" href="/./public/styles/profileStyle.css">


<style>
  .item {
    background-color: #353a40;
    width: 300px;
    height: 420px;
    border-radius: 20px;
    -webkit-box-shadow: -5px 7px 14px -2px rgba(114, 126, 140, 1);
    -moz-box-shadow: -5px 7px 14px -2px rgba(114, 126, 140, 1);
    box-shadow: -5px 7px 14px -2px rgba(114, 126, 140, 1);
    margin: 20px;
    position: relative;
  }

  .love-button {
    position: absolute;
    z-index: 3;
    border-top-right-radius: 20px;
    top: 10px;
    right: 15px;
    color: white;
    font-size: 24px;
    text-decoration: none;
    padding: 5px;
    background-color: #575460;
    border-radius: 10px;
  }
</style>




{{/section}}

<div class="info-bar ">
  <div class="info-view d-flex align-items-center">
    <img src="https://placehold.it/45x45" style="width:45; height: 45;" class="rounded-circle">
    <h4 id="email">{{user_info.email}}</h4>
    {{#if pending}}
    <div class="upgrade" style="padding-left: 50%;">
      <button href="/user/upgrade" class="btn btn-outline-warning" disabled>ƒêƒÉng k√Ω l√†m seller</button>
    </div>
    {{else}}
    <div class="upgrade" style="padding-left: 50%;">
      <button href="/user/upgrade" class="btn btn-outline-warning">ƒêƒÉng k√Ω l√†m seller</button>
    </div>
  {{/if}}
  </div>
</div>


<nav class="tabbar bg-subtitle navbar-expand-lg navbar-dark sticky-top ">
  <div class="tabmenu nav nav-tabs" id="nav-tab" role="tablist">
    <a class="nav-item tabitem nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab"
      aria-controls="nav-home" aria-selected="true" data-html="true" title="Th√¥ng tin c∆° b·∫£n c·ªßa b·∫°n.">Th√¥ng Tin C∆°
      B·∫£n</a>
    {{#if isCurrent}}
    <a class="nav-item tabitem nav-link" id="nav-change-info-tab" data-toggle="tab" href="#nav-changeinfo" role="tab"
      aria-controls="nav-profile" aria-selected="false" data-html="true" title="Thay ƒë·ªïi th√¥ng tin c√° nh√¢n.">Thay ƒë·ªïi
      th√¥ng tin</a>
    {{/if}}
    <a class="nav-item tabitem nav-link" id="nav-wish-list-tab" data-toggle="tab" href="#nav-wishlist" data-html="true"
      role="tab">Y√™u th√≠ch</a>
    <a class="nav-item tabitem nav-link" id="nav-auctioning-tab" data-toggle="tab" href="#nav-auctioning"
      data-html="true" role="tab">ƒêang tham gia</a>
    <a class="nav-item tabitem nav-link" id="nav-history-tab" data-toggle="tab" href="#nav-history" role="tab"
      aria-controls="nav-contact" aria-selected="false" data-html="true" title="C√°c s·∫£n ph·∫©m ƒë√£ chi·∫øn th·∫Øng.">L·ªãch s·ª≠
      ƒë·∫•u gi√°</a>
  </div>
</nav>
<div class="tab-content" id="nav-tabContent">
  <div class="tab-pane fade show active" id="nav-home" role="tabpanel">
    <div class="main" id="main">
      <div class="card bg-dark flex-row flex-wrap">
        <div class="card-header border-0">
          <img
            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQHHrj-_y2FAm84hK88uSS7VaadHEOWinuAGyCdv-sYAdOLGo-K&s"
            style="width: 200; height: 200;" alt="//placehold.it/200">
        </div>

        <div class="col">
          <div class="row">
            <div class="col-md-auto col-xl-auto justify-content-around">
              <p class="card-text-dark">T√™n: </p>
              <div class="info-content">
                <span class="badge badge-warning">{{user_info.lastName}} {{user_info.firstName}}</span>
              </div>
              <p class="card-text-dark">ƒê·ªãa ch·ªâ: </p>
              <div class="info-content">
                <span class="badge badge-warning">{{user_info.address}}</span>
              </div>
            </div>
            <div class="col-xl-5 col-md-4">
              <span></span>
            </div>
            <div class="col-md-auto col-xl-auto">
              <p class="card-text-dark">Email: </p>
              <div class="info-content">
                <span class="badge badge-warning">{{user_info.email}}</span>
              </div>
              <p class="card-text-dark">M·∫≠t kh·∫©u: </p>
              <div class="info-content">
                <span class="badge badge-warning">*********</span>

                {{!-- You never get a password from here --}}

              </div>
            </div>

          </div>
        </div>

        <div class="w-100"></div>
        <div class="card-footer w-100 text-muted" id="footer">
          TH√îNG TIN C√Å NH√ÇN
        </div>
      </div>
    </div>
  </div>
  {{#if isCurrent}}
  <div class="tab-pane fade" id="nav-changeinfo" role="tabpanel">
    <div class="info-container">
      <div class="card bg-dark  ">
        <div class="infocard card bg-dark ">
          <div class="card-header card-text-dark flex-row flex-wrap">
            <h3>Thay ƒë·ªïi th√¥ng tin</h3>
            <sub style="opacity: 0.75;">Thay ƒë·ªïi th√¥ng tin, b·ªè tr·ªëng n·∫øu b·∫°n kh√¥ng mu·ªën thay ƒë·ªïi.</h1>
          </div>
          <div class="card-body">
            <div class="info-group row">
              <div class="col">
                <hr>
              </div>
              <div class=".description-text col-auto">Th√¥ng tin c√° nh√¢n</div>
              <div class="col">
                <hr>
              </div>
            </div>
            <form method="POST" id="change-infor">
              <div class="form-group">
                <div class="d-flex flex-row justify-content-center ">
                  <div class="col card-text-dark ">
                    <p>H·ªç</p>
                    <input style="width:100%" type="text" name="lastname" class="form-control"
                      placeholder="{{user_info.lastname}}">
                  </div>
                  <div class="col card-text-dark ">
                    <p>T√™n</p>
                    <input style="width:100%" type="text" name="firstname" class="form-control"
                      placeholder="{{user_info.firstname}}">
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div class="d-flex flex-row justify-content-center">
                  <div class="col card-text-dark ">
                    <p>Email</p>
                    <input style="width:100%; color:black;" type="text" id="email" name="email" class="form-control"
                      placeholder="{{user_info.email}}">
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div class="d-flex flex-row justify-content-center">
                  <div class="col card-text-dark ">
                    <p>ƒê·ªãa ch·ªâ</p>
                    <input style="width:100%" type="text" name="address" class="form-control"
                      placeholder="Phau s·∫ßn Pa l√¢y">
                  </div>
                </div>
              </div>



              {{!-- <div class="info-group row">
                <div class="col">
                  <hr>
                </div>
                <div class="col-auto">T√†i kho·∫£n</div>
                <div class="col">
                  <hr>
                </div>
              </div>

              <div class="input-group form-group">

                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="fas fa-user"></i></span>
                </div>
                <input type="text" name="username" class="form-control" placeholder="username">

              </div>

              <div class="input-group form-group padding">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="fas fa-key"></i></span>
                </div>
                <input type="password" name="old_password" class="form-control" placeholder="old password">
              </div>
              <div class="input-group form-group padding">
                <div class="input-group-prepend">
                  <span class="input-group-text"><i class="fas fa-key"></i></span>
                </div>
                <input type="password" name="new_password" class="form-control" placeholder="new password">
                <input type="password" name="retype_password" class="form-control" placeholder="re-type password">
              </div> --}}

              <div class="form-group">
                <input type="submit" id="update_button" value="C·∫≠p nh·∫≠t" form="change-infor" class="btn btn-warning">
              </div>
            </form>


          </div>
        </div>
      </div>
    </div>
  </div>
  {{/if}}
  <div class="tab-pane fade" id="nav-wishlist" role="tabpanel">
    <div class="items-list">
      <div class="d-flex  flex-wrap">
        {{#each wishlistViewModel}}
        <div class="item">
          <a href="/product/detail/{{id}}" class="" style="text-decoration: none  ;">

            <img src="{{imgLink}}" alt="" style="width: 300px;

                                  height: 200px; 
                                  border-top-left-radius: 20px;
                                  border-top-right-radius: 20px;" />
            <div class="itemContent mx-3 my-2">
              <h3 class="" style="color: #bacbd8">
                {{prodName}}
              </h3>

              <span class="badge badge-warning d-flex justify-content-center align-items-center text-dark"
                style="width: 265px; height: 40px; font-size: 20px;">
                {{initPrice}} VND
              </span>

              <div class="detailInfo d-flex flex-direction-row justify-content-between"
                style="position:absolute;bottom: 10px;width: 265px; font-size: 12px;">
                <div class="text-muted">
                  <div class="">Ng√†y ƒëƒÉng</div>
                  <span>{{startDate}}</span>
                </div>
                <div class="text-muted">
                  <div class="">K·∫øt th√∫c</div>
                  <span>{{endDate}}</span>
                </div>
              </div>
          </a>

          <button class="love-button">
            {{#if isLoved}}
            <div id="lovebutton{{id}}" class="fa fa-heart" aria-hidden="true" onclick="clickLoveButton({{id}})"></div>
            {{else}}
            <div id="lovebutton{{id}}" class="fa fa-heart-o" aria-hidden="true" onclick="clickLoveButton({{id}})">
            </div>
            {{/if}}
          </button>
        </div>
      </div>

      {{/each}}
      {{!-- <div class="item">
          <a href="########" class="" style="text-decoration: none  ;">
            <img src="{{imgLink}}" alt="" style="width: 300px;
                                    height: 200px; 
                                    border-top-left-radius: 20px;
                                    border-top-right-radius: 20px;" />
            <div class="itemContent mx-3 my-2">
              <h3 class="" style="color: #bacbd8">
                C·∫ßn b√°n g·∫•p l√¥ 6 ng∆∞·ªùi Do Th√°i
              </h3>

              <span class="badge badge-warning d-flex justify-content-center align-items-center text-dark"
                style="width: 265px; height: 40px; font-size: 20px;">
                180.000.000 VND
              </span>
              <span class="badge badge-danger px-3 py-1 mt-1" style="font-size: 16px; font-weight: 400;">
                üëâ TOP 1 : L√™ H·ªìng Th√°i
              </span>
              <div class="detailInfo d-flex flex-direction-row justify-content-between"
                style="position:absolute;bottom: 10px;width: 265px; font-size: 12px;">
                <div class="text-muted">
                  <div class="">Ng√†y ƒëƒÉng</div>
                  <span>12/12/2012</span>
                </div>
                <div class="text-muted">
                  <div class="">C√≤n l·∫°i</div>
                  <span>3 ng√†y</span>
                </div>
                <div class="text-muted">
                  <div class="">L∆∞·ª£t ƒë·∫•u</div>
                  <span>23 l∆∞·ª£t</span>
                </div>
              </div>
            </div>
          </a>

          <a href="###" class="love-button">
            <i class="fa fa-heart-o" aria-hidden="true"></i>
          </a>
        </div>
        <div class="item">
          <a href="########" class="" style="text-decoration: none  ;">
            <img src="{{imgLink}}" alt="" style="width: 300px;
                                      height: 200px; 
                                      border-top-left-radius: 20px;
                                      border-top-right-radius: 20px;" />
            <div class="itemContent mx-3 my-2">
              <h3 class="" style="color: #bacbd8">
                C·∫ßn b√°n g·∫•p l√¥ 6 ng∆∞·ªùi Do Th√°i
              </h3>

              <span class="badge badge-warning d-flex justify-content-center align-items-center text-dark"
                style="width: 265px; height: 40px; font-size: 20px;">
                180.000.000 VND
              </span>
              <span class="badge badge-danger px-3 py-1 mt-1" style="font-size: 16px; font-weight: 400;">
                üëâ TOP 1 : L√™ H·ªìng Th√°i
              </span>
              <div class="detailInfo d-flex flex-direction-row justify-content-between"
                style="position:absolute;bottom: 10px;width: 265px; font-size: 12px;">
                <div class="text-muted">
                  <div class="">Ng√†y ƒëƒÉng</div>
                  <span>12/12/2012</span>
                </div>
                <div class="text-muted">
                  <div class="">C√≤n l·∫°i</div>
                  <span>3 ng√†y</span>
                </div>
                <div class="text-muted">
                  <div class="">L∆∞·ª£t ƒë·∫•u</div>
                  <span>23 l∆∞·ª£t</span>
                </div>
              </div>
            </div>
          </a>

          <a href="###" class="love-button">
            <i class="fa fa-heart-o" aria-hidden="true"></i>
          </a>
        </div> --}}
    </div>
  </div>
</div>
<div class="tab-pane fade" id="nav-auctioning" role="tabpanel">
  <div class="items-list">
    <div class="d-flex  flex-wrap">
      {{#each auchoning}}
      <div>
        <div class="item">
          <a href="/product/detail/{{id}}" class="" style="text-decoration: none  ;">
            <img src="{{imgLink}}" alt="" style="width: 300px;
                                      height: 200px; 
                                      border-top-left-radius: 20px;
                                      border-top-right-radius: 20px;" />
            <div class="itemContent px-3 py-2">
              <h3 class="" style="color: #bacbd8">
                {{!-- L√¥ 6 ng∆∞·ªùi Do Th√°i --}}
                {{prodName}}
              </h3>

              <span class="badge badge-warning d-flex justify-content-center align-items-center text-dark"
                style="width: 265px; height: 40px; font-size: 20px;">
                {{!-- 180.000.000 VND --}}
                {{highestPrice}} VNƒê
              </span>
              <span class="badge badge-danger px-3 py-1 mt-1" style="font-size: 16px; font-weight: 400;">
                üëâ TOP 1 :
                {{!-- L√™ H·ªìng Th√°i --}}
                {{top1}}
              </span>
              <div class="detailInfo d-flex flex-direction-row justify-content-between"
                style="position:absolute;bottom: 10px;width: 265px; font-size: 12px;">
                <div class="text-muted">
                  <div class="">Ng√†y ƒëƒÉng</div>
                  <span>{{startDate}}</span>
                </div>
                <div class="text-muted">
                  <div class="">K·∫øt th√∫c v√†o</div>
                  <span>{{endDate}}</span>
                </div>

              </div>
            </div>
          </a>

          <button class="love-button">
            {{#if isLoved}}
            <div id="lovebutton{{id}}" class="fa fa-heart" aria-hidden="true" onclick="clickLoveButton({{id}})"></div>
            {{else}}
            <div id="lovebutton{{id}}" class="fa fa-heart-o" aria-hidden="true" onclick="clickLoveButton({{id}})">
            </div>
            {{/if}}
          </button>
        </div>
      </div>

      {{/each}}
    </div>
  </div>
</div>
<div class="tab-pane fade" id="nav-history" role="tabpanel">
  <div class="items-list">
    <div class="d-flex  flex-wrap">
      {{#each wonlist}}
      <div class="item">
        <a href="/product/detail/{{id}}" class="" style="text-decoration: none  ;">

          <img src="{{imgLink}}" alt="" style="width: 300px;

                                  height: 200px; 
                                  border-top-left-radius: 20px;
                                  border-top-right-radius: 20px;" />
          <div class="itemContent mx-3 my-2">
            <h3 class="" style="color: #bacbd8">
              {{prodName}}
            </h3>

            <span class="badge badge-warning d-flex justify-content-center align-items-center text-dark"
              style="width: 265px; height: 40px; font-size: 20px;">
              {{instantPrice}} VND
            </span>

            <div class="detailInfo d-flex flex-direction-row justify-content-between"
              style="position:absolute;bottom: 10px;width: 265px; font-size: 12px;">
              <div class="text-muted">
                <div class="">Ng√†y ƒëƒÉng</div>
                <span>{{startDate}}</span>
              </div>
              <div class="text-muted">
                <div class="">K·∫øt th√∫c</div>
                <span>{{endDate}}</span>
              </div>
            </div>
        </a>

        {{!-- <button class="love-button">
          {{#if isLoved}}
          <div id="lovebutton{{id}}" class="fa fa-heart" aria-hidden="true" onclick="clickLoveButton({{id}})"></div>
          {{else}}
          <div id="lovebutton{{id}}" class="fa fa-heart-o" aria-hidden="true" onclick="clickLoveButton({{id}})">
          </div>
          {{/if}}
        </button> --}}
      </div>
    </div>

    {{/each}}
  </div>


</div>
</div>
</div>